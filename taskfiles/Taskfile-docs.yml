version: '3'

tasks:

  default:
    cmds:
      - task: serve
    silent: true

  # === Documentation ===

  build:
    desc: Build documentation with MkDocs
    summary: Generates static documentation site in site/ directory
    cmds:
      - cmd: echo "üìö Building documentation..."
        silent: true
      - uv run mkdocs build {{.CLI_ARGS}} 2>&1 | grep -v "MERMAID2.*Found superfences config" | grep -v "MERMAID2.*Initialization arguments" | grep -v "MERMAID2.*Using javascript library" || true
      - cmd: echo "‚úÖ Documentation built successfully in site/"
        silent: true

  serve:
    desc: Serve documentation locally for development (default docs task)
    summary: Starts local server with live reload at http://127.0.0.1:8000
    cmds:
      - cmd: echo "üåç Starting documentation server..."
        silent: true
      - uv run mkdocs serve {{.CLI_ARGS}}

  # === Help ===
  help:
    desc: Show available tasks from this Taskfile
    summary: Displays documentation tasks
    cmd: taskfile-help docs
    silent: true
