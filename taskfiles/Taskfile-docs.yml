version: '3'

tasks:

  default:
    cmds:
      - task: serve
    silent: true

  # === Documentation ===

  build:
    desc: Build documentation with MkDocs
    cmds:
      - cmd: echo "üìö Building documentation..."
        silent: true
      - uv run mkdocs build {{.CLI_ARGS}} 2>&1 | grep -v "MERMAID2.*Found superfences config" | grep -v "MERMAID2.*Initialization arguments" | grep -v "MERMAID2.*Using javascript library" || true
      - cmd: echo "‚úÖ Documentation built successfully in site/"
        silent: true

  serve:
    desc: Serve documentation locally for development (default docs task)
    cmds:
      - cmd: echo "üåç Starting documentation server..."
        silent: true
      - uv run mkdocs serve {{.CLI_ARGS}}
